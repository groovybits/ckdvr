head	1.3;
access;
symbols;
locks
	root:1.3; strict;
comment	@# @;


1.3
date	2003.10.14.03.56.40;	author root;	state Exp;
branches;
next	1.2;

1.2
date	2003.10.14.03.36.50;	author root;	state Exp;
branches;
next	1.1;

1.1
date	2003.10.14.02.32.41;	author root;	state Exp;
branches;
next	;


desc
@Encoder Scheudldules
@


1.3
log
@fixed form action
@
text
@
<?
// Todays Date
$today = date("Y/m/d");
$cur_date = date("H:i:s");

// Default to Port 0
if ($port == '') 
  $port = 0;

// Record Date
if($date != '') {
  list($year, $month, $day) = explode("/", $date);
} else {
  $date = $today;
}

// Record Time
if($minutes != '' && $minutes != "00:00:00") {
  list($hour, $min, $sec) = explode(":",$minutes);
} else if($minutes == '') {
  $minutes = $cur_date;
  #$minutes = "00:00:00";
}

// Calculate UNIX Timestamp
$unix_tstart = mktime($hour, $min, $sec, $month, $day, $year);

// Duration of recording
if($duration != '' && $duration != "00:00:00") {
  list($hour, $min, $sec) = explode(":",$duration);
  $dur_seconds = ($hour * 3600) + ($min * 60) + $sec;
} else if($duration == '') {
  $duration = "00:00:00";
}

// Print Out After Entry Chosen
if($title != '' && $dur_seconds != '' && $unix_tstart != '') {
?>
<table valign=top border=1 cellpadding=2 cellspacing=1 bgcolor=lightgrey>
<tr><td align=left bgcolor=navy>
<?
  echo "&nbsp;<font color=white><strong>";
  echo "$port Adding [$title] for $dur_seconds Seconds...\n"; 
  echo "</strong></font>&nbsp;";
?>
</td></tr>
<tr><td align=center bgcolor=white>
<? passthru("$DVRCMD ars $port $unix_tstart $dur_seconds $title 1>/dev/null & ");?>
</td></tr>
</table>
<br>
<?
  //exit(0);
}

?>

<table border=1 cellpadding=2 cellspacing=1 bgcolor=lightgrey>
<tr><td align=left valign=top colspan=3>
<form action=recordschedule.php method=post name=encoder>
<input type=hidden name=port value=<?echo $port?>>
<input type=hidden name=myport value=<?echo $port?>>
<strong>Date: </strong>
<input type=text name="date" size=10 maxlength=10  value=<?echo $date?>>
<strong>Time: </strong>
<input type=text name="minutes" size=8 maxlength=8  value=<?echo $minutes?>>
<strong>Title: </strong>
<input type=text name="title" size=50 maxlength=50 value="<?echo $title?>">
<strong>Duration: </strong>
<input type=text name="duration" size=8 maxlength=8  value=<?echo $duration?>>
<input type=submit value=Add name=submit>
</form>
</td></tr>

</table>

@


1.2
log
@lsAdded ability to ad ^?d to the recording schedule
@
text
@d61 1
a61 1
<form action=enc_sched.php method=post name=encoder>
@


1.1
log
@Initial revision
@
text
@a0 10
<? include 'variables.php' ?>
<HTML>
<HEAD>
<TITLE>Record File</TITLE>
<? include 'stylesheet.php' ?>
</head>
<body>

<? include 'topbar.php' ?>
<br>
d3 14
d18 1
a20 1
  $seconds = ($hour * 3600) + ($min * 60) + $sec;
d22 2
a23 1
  $minutes = "00:00:00";
d26 4
d32 1
a32 1
  $seconds = ($hour * 3600) + ($min * 60) + $sec;
a35 4
if($encstop != '') {
  passthru("$DVRCMD se $port");
  sleep(3);
}
d37 2
a38 1
if($title != '' && $minutes != '') {
d40 1
a40 12
<br>
<table align=left valign=top border=1 cellpadding=2 cellspacing=1 bgcolor=lightgrey>
<form action=encoder.php method=post>
<tr><td align=left>
<input type=hidden name=port value=<?echo $port?>>
<input type=hidden name=myport value=<?echo $port?>>
<input type=hidden name=encstop value=stop>
<input type=submit value=Stop name=submit>
</form>
&nbsp;<a href=/>Main</a> &nbsp; 
&nbsp;<a href=/encoder.php>Encoder</a> &nbsp;
</td></tr>
d44 1
a44 1
  echo "$port Recording [$title] for $seconds Seconds...\n"; 
d49 1
a49 1
<PRE><? passthru("$DVRCMD e $seconds $port $title & ");?></PRE>
d52 1
a58 4
<?$orig_port = $port?>
<? for($i=0;$i <= $PORTS;$i++) { 
     $port = $i;
?>
a59 3
<tr><th align=left bgcolor=navy>
<font color=white>DVR Record Schedule <?echo $port?></font>
</th></tr>
d61 1
a61 1
<form action=encoder.php method=post name=encoder>
d65 1
a65 1
<input type=text name="minutes" size=10 maxlength=10  value=<?echo $date?>>
d69 1
a69 1
<input type=text name="title" size=50 maxlength=50 value=<?echo $title?>>
d72 1
a72 1
<input type=submit value=Start name=submit>
a74 15
<tr><td align=left>

<table border=0 cellpadding=2 cellspacing=1 width=%100>
<td align=left bgcolor=#EEEE99>
<?passthru("$DVRCMD sse $port");?>
</td><td bgcolor=lightgrey align=right>
<form action=encoder.php method=post>
<input type=hidden name=port value=<?echo $port?>>
<input type=hidden name=myport value=<?echo $port?>>
<input type=hidden name=encstop value=stop>
<input type=submit value=Stop name=submit>
</form>
</td></table>

</td></tr>
a76 2
<br>
<? } ?>
a77 4
<?$port = $orig_port?>
<? include 'footer.php' ?>
</body>
</html>
@
